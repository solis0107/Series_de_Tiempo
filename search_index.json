[["requerimientos.html", "Capítulo 2 Requerimientos 2.1 Instalación de librerias 2.2 Importe de los datos 2.3 Formato", " Capítulo 2 Requerimientos En este apartado se detallará el importe y preparación de los datos utilizados al igual que las librerías que se requieren instalar para el desarrollo de este libro. 2.1 Instalación de librerias install.packages(&quot;readxl&quot;) ## The following package(s) will be installed: ## ## - readxl [1.4.3] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing readxl ... OK [linked from cache in 0.0029s] ## ## Successfully installed 1 package in 18 milliseconds. install.packages(&quot;forecast&quot;) ## The following package(s) will be installed: ## ## - forecast [8.21.1] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing forecast ... OK [linked from cache in 0.0014s] ## ## Successfully installed 1 package in 16 milliseconds. install.packages(&quot;tseries&quot;) ## The following package(s) will be installed: ## ## - tseries [0.10-54] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing tseries ... OK [linked from cache in 0.0013s] ## ## Successfully installed 1 package in 14 milliseconds. install.packages(&quot;trend&quot;) ## The following package(s) will be installed: ## ## - trend [1.1.5] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing trend ... OK [linked from cache in 0.0013s] ## ## Successfully installed 1 package in 14 milliseconds. install.packages(&quot;Kendall&quot;) ## The following package(s) will be installed: ## ## - Kendall [2.2.1] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing Kendall ... OK [linked from cache in 0.0013s] ## ## Successfully installed 1 package in 15 milliseconds. install.packages(&quot;ggplot2&quot;) ## The following package(s) will be installed: ## ## - ggplot2 [3.4.3] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing ggplot2 ... OK [linked from cache in 0.0017s] ## ## Successfully installed 1 package in 14 milliseconds. install.packages(&quot;ggfortify&quot;) ## The following package(s) will be installed: ## ## - ggfortify [0.4.16] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing ggfortify ... OK [linked from cache in 0.0012s] ## ## Successfully installed 1 package in 14 milliseconds. install.packages(&quot;lubridate&quot;) ## The following package(s) will be installed: ## ## - lubridate [1.9.2] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing lubridate ... OK [linked from cache in 0.0013s] ## ## Successfully installed 1 package in 14 milliseconds. install.packages(&quot;aTSA&quot;) ## The following package(s) will be installed: ## ## - aTSA [3.1.2] ## ## These packages will be installed into &quot;C:/Users/JSOLISP/OneDrive - TCC/Escritorio/PERSN/Universidad/Series_de_tiempo/PROYECTO_BOOKDOWN/renv/library/R-4.3/x86_64-w64-mingw32&quot;. ## ## # Installing packages -------------------------------------------------------- ## ## - Installing aTSA ... OK [linked from cache in 0.0014s] ## ## Successfully installed 1 package in 16 milliseconds. 2.2 Importe de los datos library(readxl) ruta_archivo &lt;- &quot;datos.xlsx&quot; nombre_hoja &lt;- &quot;datos&quot; datos &lt;- read_excel(ruta_archivo, sheet = &#39;datos&#39;) 2.3 Formato Tipos de datos Originales: data_types &lt;- sapply(datos, class) print(data_types) ## Date Month Year Week day Volume ## &quot;character&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; Es requerido para el desarrollo que la serie de tiempo tenga el formato de fecha en tipo Date datos$Date &lt;- as.Date(datos$Date) Creación de la serie de tiempo: serie_tiempo &lt;- ts(datos$Volume, start = min(datos$Date), frequency = 7) "],["análisis-de-descriptivo-y-transformaciones.html", "Capítulo 3 Análisis de descriptivo y transformaciones 3.1 Visualización Inicial 3.2 Parametros de la seire de tiempo 3.3 Descomponsición de la serie 3.4 Analisis de Tendencia 3.5 Analisis de Estacionalidad 3.6 Análisis de estacionariedad 3.7 Tranformación (Diferenciación)", " Capítulo 3 Análisis de descriptivo y transformaciones 3.1 Visualización Inicial La serie de tiempo a analizar muestra el volumen de llamadas que ingresan diariamente en una linea telefónica; demos una primera visualización a la serie de tiempo que se analizará: library(ggplot2) ggplot(datos, aes(x = Date, y = Volume)) + geom_line() + labs(x = &quot;Fechas&quot;, y = &quot;Valores&quot;, title = &quot;Serie de Tiempo&quot;)+ scale_x_date(date_breaks = &quot;1 month&quot;, date_labels = &quot;%Y-%B&quot;)+ theme_minimal() + theme(axis.text.x = element_text(angle = 45, hjust = 1)) De forma general podemos ver que la serie de tiempo muestra un comportamiento estacional, sin una clara tendencia. No se evidencian valores atípicos significativos, pero estos se validaran próximamente. 3.2 Parametros de la seire de tiempo Exploremos el tipo de dato y la ventana de tiempo en la que se presenta esta serie: min_date &lt;- min(datos$Date) max_date &lt;- max(datos$Date) tipo_dato &lt;- class(serie_tiempo) print(paste(&quot;Mínimo día:&quot;, min_date)) ## [1] &quot;Mínimo día: 2022-05-22&quot; print(paste(&quot;Máximo día:&quot;, max_date)) ## [1] &quot;Máximo día: 2023-04-09&quot; print(paste(&quot;Tipo de dato:&quot;, tipo_dato)) ## [1] &quot;Tipo de dato: ts&quot; Confirmamos que la serie de tiempo quedo en el formato correcto “ts” y que esta trae datos desde el 22 de mayo del 2022 hasta el 9 de abril del 2023. En este apartado haremos un análisis descriptivo de la serie de tiempo, exploraremos sus componentes y aplicaremos alguna transformación en caso de esta sea requerida. 3.3 Descomponsición de la serie Iniciemos descomponiendo la serie de tiempo de forma aditiva, dado que la amplitud de las estacionalidades se mantiene en el tiempo,no se considera la descomposición multiplicativa. library(ggplot2) library(ggfortify) # Descomposición de la serie de tiempo fit &lt;- decompose(serie_tiempo, type=&#39;additive&#39;) autoplot(fit)+ labs(title = &quot;Descomposición de la serie de tiempo&quot;, x = &quot;Tiempo&quot;, y = &quot;Valor&quot;, colour = &quot;Gears&quot;)+ theme_bw() ## Warning: Removed 12 rows containing missing values (`geom_line()`). De forma general podemos ver que no hay una clara tendencia, aunque por ventanas de tiempo si se logra mantener una tendencia al alza o a la baja. La serie presenta una fuerte estacionalidad, la cual es homogenea para todo el periodo analizado. Los residuos presentan un buen comportamiento, están centrados en cero y no tienen un patron marcado, se pueden considerar aleatorios. 3.4 Analisis de Tendencia Dado que la existencia de tendencia en la serie no es muy clara, se ejecutara el test Kendall para definir si existe o no tendencia en la serie analizada: Ho: La serie no tiene tendencia H1: La serie si presenta tendencia library(Kendall) mk_test &lt;- Kendall(y=datos$Volume, x =datos$Date ) summary(mk_test) ## Score = -5464 , Var(Score) = 3761233 ## denominator = 51884.36 ## tau = -0.105, 2-sided pvalue =0.0048495 A un nivel de significancia del 0.05 se concluye que hay evidencia suficiente para soportar que la serie si presenta tendencia. 3.5 Analisis de Estacionalidad La estacionalidad de esta serie es bastante clara, pero podemos tener mayor detalle de esta analizando las gráficas ACF y PACF. La gráfica de ACF y PACF muestran la correlación entre una serie de tiempo y sus valores rezagados, pero la gráfica PACF elimina la influencia de los rezagos intermedios. En otras palabras, muestra la correlación directa entre dos puntos en el tiempo después de eliminar la correlación indirecta a través de otros rezagos. par(mfrow = c(1, 2)) acf(serie_tiempo) pacf(serie_tiempo) Por la forma en que se presentan los rezagos en la gráfica ACF se puede evidenciar que si existe una un patrón en la serie de tiempo de de 7 tiempos. Esto tiene sentido dado que la periodicidad del proceso analizado es semanal. 3.6 Análisis de estacionariedad Una serie de tiempo se considera estacionaria cuando sus propiedades estadísticas se mantienen constantes a lo largo del tiempo, lo que significa que no muestra cambios sistemáticos en su media, varianza y autocorrelación a medida que avanza el tiempo. En términos más simples, una serie de tiempo estacionaria es una serie en la que los patrones y características se repiten de manera consistente en diferentes períodos. Se utilizara el test ADF para probar si existe estacionariedad en la serie estudiada: Ho: La serie es no estacionaria: tiene raíz unitaria H1: La serie es estacionaria: no tiene raíz unitaria library(tseries) ## Registered S3 method overwritten by &#39;quantmod&#39;: ## method from ## as.zoo.data.frame zoo adf.test(serie_tiempo) ## ## Augmented Dickey-Fuller Test ## ## data: serie_tiempo ## Dickey-Fuller = -1.8044, Lag order = 6, p-value = 0.659 ## alternative hypothesis: stationary Con un nivel de significance de 0.05 se concluye que no hay evidencia sufifiencte para decir que la serie es estacionaria, esto resultado es coherente con el test de tendencia el cual mostró que la serie efectivamente si presenta una tendencia en el tiempo. 3.6.1 Análisis de rezagos El análisis de rezagos se utiliza para ver la correlación que existe entre los valores y el n valor rezagado; analicemos la relación que existe entre cada valor y sus primeros 8 rezagos, considero que los primeros 8 son suficiente dado que se esperaría ver una relación de los días de la semana entre sí, Osea lunes-lunes, martes-martes… etc. library(ggplot2) lag.plot(serie_tiempo,lags=8,layout=c(2,4)) La gráfica de ACF muestra la correlación entre una serie de tiempo y sus valores rezagados (anteriores) en diferentes intervalos de tiempo. Cada barra en la gráfica representa la correlación en un rezago específico. Como era de esperarse, se evidencia un patrón claro en el lag 7, esto significa que hay una alta correlación entre la serie y 7 rezagos. 3.7 Tranformación (Diferenciación) Dado que la serie presenta tendencia, se debe intentará quitar esta tendencia con el metodo de defierenciación. seriedf1 =diff(serie_tiempo,differences=1) Analicemos la serie transformada library(ggplot2) library(ggfortify) # Descomposición de la serie de tiempo fit &lt;- decompose(seriedf1, type=&#39;additive&#39;) autoplot(fit)+ labs(title = &quot;Descomposición de la serie de tiempo&quot;, x = &quot;Tiempo&quot;, y = &quot;Valor&quot;, colour = &quot;Gears&quot;)+ theme_bw() ## Warning: Removed 12 rows containing missing values (`geom_line()`). Efectivamente se redujo la tendencia en la serie de tiempo, sobre todo en los últimos meses de el expectro analizado, originalmente este tenia una tendencia a la baja y ahora se ve mucho mas suavizado. Confirmemos la no existencia de tendencia ejecutando nuevamente el test ADF Ho: La serie es no estacionaria: tiene raíz unitaria H1: La serie es estacionaria: no tiene raíz unitaria library(tseries) adf.test(seriedf1) ## Warning in adf.test(seriedf1): p-value smaller than printed p-value ## ## Augmented Dickey-Fuller Test ## ## data: seriedf1 ## Dickey-Fuller = -12.545, Lag order = 6, p-value = 0.01 ## alternative hypothesis: stationary A un nivel de significancia del 0.05 podemos concluir que hay evidencia suficiente para decir que la serie es estacionaria por lo que se confirma la eliminación de la tendencia. "],["modelado.html", "Capítulo 4 Modelado 4.1 Regresión Lineal 4.2 Suavisamiento Exponencial Simple 4.3 Suavisamiento Exponencial Triple (Holt-Winters) 4.4 Modelo ARIMA", " Capítulo 4 Modelado 4.1 Regresión Lineal Analicemos el modelado de esta serie de tiempo con una regresión lineal; si bien, la regresión no va a ser util para modelar esta serie de tiempo, nos dará una vista general de la tendencia de los datos. plot(serie_tiempo) abline(reg = lm(serie_tiempo ~ time(serie_tiempo))) 4.2 Suavisamiento Exponencial Simple el suavisamiento exponencial es especialmente útil cuando se trabaja con datos que muestran tendencias y patrones suaves, pero no poseen patrones estacionales o cíclicos pronunciados. Dado que nuestra serie presenta una fuerte estacionalidad, no se espera que este método genere un buen ajuste a la serie. Analicemos su comportamiento: library(forecast) ## Registered S3 methods overwritten by &#39;forecast&#39;: ## method from ## autoplot.Arima ggfortify ## autoplot.acf ggfortify ## autoplot.ar ggfortify ## autoplot.bats ggfortify ## autoplot.decomposed.ts ggfortify ## autoplot.ets ggfortify ## autoplot.forecast ggfortify ## autoplot.stl ggfortify ## autoplot.ts ggfortify ## fitted.ar ggfortify ## fortify.ts ggfortify ## residuals.ar ggfortify fcast_ses &lt;- ses(serie_tiempo, h = 12) autoplot(fcast_ses) + autolayer(fitted(fcast_ses), series=&quot;Fitted&quot;) Como era de esperarse, el suavisamiento exponencial simple no logra seguir la fuerte estacionalidad que tiene la serie de tiempo. 4.3 Suavisamiento Exponencial Triple (Holt-Winters) A continuación analizaremos el comportamiento del modelado Hold-Winters en la serie de tiempo, como se habia provado anteriormente, esta serie tiene estacionalidad y tendencia, por lo que se espera tener buenos resultados con este modelo. mod1 = HoltWinters(serie_tiempo, seasonal = &quot;additive&quot;) plot(mod1) De forma general, se puede ver un buen ajuste del modelo a los datos, no solo en la tendencia que estos llevan sino también en la fuerte estacionalidad que tiene la serie de tiempo. El modelo es capaz de respetar tanto los 4.4 Modelo ARIMA Como lo hemos visto en el analisis descriptivo y en el modelado de regresión lineal, nuestra serie no es estacionaria, al intentar utilizar un modelo ARIMA se debe garantizar que la serie de tiempo es estacionaria. Para esto se realizará una transformación a la serie para lograr que esta sea estacionaria utilizando la función adf. library(aTSA) ## ## Attaching package: &#39;aTSA&#39; ## The following object is masked from &#39;package:forecast&#39;: ## ## forecast ## The following objects are masked from &#39;package:tseries&#39;: ## ## adf.test, kpss.test, pp.test ## The following object is masked from &#39;package:graphics&#39;: ## ## identify adf.test(diff(serie_tiempo)) ## Augmented Dickey-Fuller Test ## alternative: stationary ## ## Type 1: no drift no trend ## lag ADF p.value ## [1,] 0 -22.7 0.01 ## [2,] 1 -19.0 0.01 ## [3,] 2 -16.0 0.01 ## [4,] 3 -14.2 0.01 ## [5,] 4 -18.8 0.01 ## [6,] 5 -26.9 0.01 ## Type 2: with drift no trend ## lag ADF p.value ## [1,] 0 -22.7 0.01 ## [2,] 1 -19.0 0.01 ## [3,] 2 -16.0 0.01 ## [4,] 3 -14.2 0.01 ## [5,] 4 -18.8 0.01 ## [6,] 5 -26.9 0.01 ## Type 3: with drift and trend ## lag ADF p.value ## [1,] 0 -22.7 0.01 ## [2,] 1 -19.0 0.01 ## [3,] 2 -15.9 0.01 ## [4,] 3 -14.2 0.01 ## [5,] 4 -18.7 0.01 ## [6,] 5 -26.9 0.01 ## ---- ## Note: in fact, p.value = 0.01 means p.value &lt;= 0.01 Con este resultado confirmamos que la serie ya se encuentra estacionaria. Encontramos los parametros ARIMA de la serie de tiempo utilizando la funcion auto.arima modelo&lt;-auto.arima(diff(serie_tiempo), seasonal = FALSE) summary(modelo) ## Series: diff(serie_tiempo) ## ARIMA(3,0,2) with zero mean ## ## Coefficients: ## ar1 ar2 ar3 ma1 ma2 ## 0.8245 -0.4386 -0.2411 -1.5124 0.7799 ## s.e. 0.0690 0.0690 0.0623 0.0464 0.0477 ## ## sigma^2 = 3395: log likelihood = -1764.57 ## AIC=3541.14 AICc=3541.4 BIC=3563.78 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ## Training set -0.3987745 57.81435 46.44426 68.63847 210.5593 0.9619898 ## ACF1 ## Training set -0.04708994 Utilizando estos parametros para hacer predicciones en el modelo modelo_arima &lt;- arima(diff(serie_tiempo), order = c(3,0,2)) n_predicciones &lt;- 10 predicciones &lt;- predict(modelo_arima, n.ahead = n_predicciones) # Visualiza las predicciones plot(diff(serie_tiempo) , main = &quot;Serie Temporal y Predicciones&quot;) lines(predicciones$pred, col = &quot;red&quot;, lty = 2) # Línea de predicciones legend(&quot;topright&quot;, legend = &quot;Predicciones&quot;, col = &quot;red&quot;, lty = 2) Veamos el ajuste del modelo a la serie de tiempo: library(forecast) # Graficar la serie de tiempo original plot(diff(serie_tiempo), main = &quot;Serie Temporal vs. Modelo ARIMA&quot;) # Agregar las predicciones del modelo ARIMA al gráfico lines(fitted(modelo_arima), col = &quot;blue&quot;, lwd = 0.5) # Línea de predicciones La serie logra captar los patrones de estacionariedad, se confirma nuevamente que la serie quedo estacionaria, no se evidencian patrones de tendencia en el comportamiento de esta. Si bien aún no podemos definir que modelo se ajustó mejor porque no hemos definido medidas de desempeño, pero para la serie sin tendencia este parece tener un buen ajuste. 4.4.1 Analisis de residuales en modelo Arima Para que el modelo pueda ser utilizado se debe garantizar que este tiene ruido blanco, por lo que haremos verificaciones de normalidad, independencia y homocedasticidad y media cero en los errores. 4.4.1.1 Normalidad Ho: Los errores distribuyen normal H1: Los errores no distribuyen normal residuales&lt;-modelo_arima$residuals qqnorm(residuales) qqline(residuales) shapiro.test(residuales) ## ## Shapiro-Wilk normality test ## ## data: residuales ## W = 0.99528, p-value = 0.4369 Con un nivel de significancia de 0.05 no se puede concluir que los errores no siguen una distribución normal. Esto se reafirma en la grafica, la cual muestra un comportamiento muy señido a la linea de normalidad. 4.4.1.2 Homocedastidad y media cero acf(residuals(modelo_arima)) Del análisis visual que nos da gráfica, se puede concluir que los errores si están centrados en cero pero estos no tienen una varianza constante, por lo que existe heterocedastidad. 4.4.1.3 Independencia Ho: Los residuo son independientes H1: Los residuos son dependientes Box.test(residuales,type = &quot;Ljung-Box&quot;) ## ## Box-Ljung test ## ## data: residuales ## X-squared = 0.72194, df = 1, p-value = 0.3955 A un nivel de significancia de 0.05 no se puede concluir que los residuos no son independientes. Si bien la mayoria de los supuestos se cumplen, los residuos presentan heterosedasticisas, su varianza varia en el tiempo, por lo que no se puede decir que le modelo presenta ruido blanco. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
